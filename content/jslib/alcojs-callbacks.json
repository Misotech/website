{
  "bodyContent": "# Подписка на события AlcoJS\n\n## Успешная загрузка\n\n```javascript\nalco('onReady', function(){\n  console.log('alco ready callback! uid:', alco('getUid'));\n});\n\n//> alco ready callback! uid: 4752253616879771366\n```\nЕсли трекер уже загружен, коллбек будет выполнен сразу\n\n## Получение Alco User ID\n\n```javascript\nalco('getUid')\n```\n\nНо получить его можно только после загрузки трекера, поэтому следует оборачивать в обработчик загрузки\n\n```javascript\nalco('onReady', function(){\n  console.log('alcoUID:',alco('getUid'));\n});\n\n// Или так\n\nalco('onReady', function(){\n  dataLayer.push({\n    'alcoUserId': alco('getUid')\n  });\n});\n```\n\n```javascript\n\n```\n\n## Подписка на все события\n\nЕще до того, как данные будут отправлены на сервер, они станут доступны на странице\n\n```javascript\nalco('onEvent', function(name, data){\n  //... your code here\n  console.log(name, data);\n});\n```\n\n\n```javascript\nalco('onEvent', function(name, data){\n  // Ловим событие ошибки при заполнении адреса доставки\n  if (name === 'Form invalid' && data.fname === 'delivery') {\n    // Ждем 5 секунд\n    setTimeout(function(){\n      // Открываем окно чата, передаем пометку оператору\n      SomeChat.openChat({info: 'Проблемы с заполнением формы доставки'});\n      // Передаем событие открытия чата в Rockstat, чтобы можно было оценить эффективность\n      aclo('event', 'Chat Opened', {reason: 'Invalid delivery details'})\n    }), 5*1000);\n  }\n});\n```",
  "bodyHtml": "<h1>Подписка на события AlcoJS</h1>\n<h2>Успешная загрузка</h2>\n<pre><code class=\"hljs\">alco(<span class=\"hljs-string\">'onReady'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>{\n  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'alco ready callback! uid:'</span>, alco(<span class=\"hljs-string\">'getUid'</span>));\n});\n\n<span class=\"hljs-comment\">//&gt; alco ready callback! uid: 4752253616879771366</span></code></pre><p>Если трекер уже загружен, коллбек будет выполнен сразу</p>\n<h2>Получение Alco User ID</h2>\n<pre><code class=\"hljs\">alco(<span class=\"hljs-string\">'getUid'</span>)</code></pre><p>Но получить его можно только после загрузки трекера, поэтому следует оборачивать в обработчик загрузки</p>\n<pre><code class=\"hljs\">alco(<span class=\"hljs-string\">'onReady'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>{\n  <span class=\"hljs-built_in\">console</span>.log(<span class=\"hljs-string\">'alcoUID:'</span>,alco(<span class=\"hljs-string\">'getUid'</span>));\n});\n\n<span class=\"hljs-comment\">// Или так</span>\n\nalco(<span class=\"hljs-string\">'onReady'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>{\n  dataLayer.push({\n    <span class=\"hljs-string\">'alcoUserId'</span>: alco(<span class=\"hljs-string\">'getUid'</span>)\n  });\n});</code></pre><pre><code class=\"hljs\"></code></pre><h2>Подписка на все события</h2>\n<p>Еще до того, как данные будут отправлены на сервер, они станут доступны на странице</p>\n<pre><code class=\"hljs\">alco(<span class=\"hljs-string\">'onEvent'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">name, data</span>)</span>{\n  <span class=\"hljs-comment\">//... your code here</span>\n  <span class=\"hljs-built_in\">console</span>.log(name, data);\n});</code></pre><pre><code class=\"hljs\">alco(<span class=\"hljs-string\">'onEvent'</span>, <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">name, data</span>)</span>{\n  <span class=\"hljs-comment\">// Ловим событие ошибки при заполнении адреса доставки</span>\n  <span class=\"hljs-keyword\">if</span> (name === <span class=\"hljs-string\">'Form invalid'</span> &amp;&amp; data.fname === <span class=\"hljs-string\">'delivery'</span>) {\n    <span class=\"hljs-comment\">// Ждем 5 секунд</span>\n    setTimeout(<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\"></span>)</span>{\n      <span class=\"hljs-comment\">// Открываем окно чата, передаем пометку оператору</span>\n      SomeChat.openChat({<span class=\"hljs-attr\">info</span>: <span class=\"hljs-string\">'Проблемы с заполнением формы доставки'</span>});\n      <span class=\"hljs-comment\">// Передаем событие открытия чата в Rockstat, чтобы можно было оценить эффективность</span>\n      aclo(<span class=\"hljs-string\">'event'</span>, <span class=\"hljs-string\">'Chat Opened'</span>, {<span class=\"hljs-attr\">reason</span>: <span class=\"hljs-string\">'Invalid delivery details'</span>})\n    }), <span class=\"hljs-number\">5</span>*<span class=\"hljs-number\">1000</span>);\n  }\n});</code></pre>",
  "preview": "Подписка на события AlcoJS\n\n Успешная загрузка\n\nalco('onReady', function(){\n  console.log('alco ready",
  "title": "Подписка на события AlcoJS",
  "dir": "content/jslib",
  "base": "alcojs-callbacks.json",
  "ext": ".json",
  "sourceBase": "alcojs-callbacks.md",
  "sourceExt": ".md"
}