{"data":"<h1 id=\"-alcojs\">Подписка на события AlcoJS</h1>\n<h2 id=\"-\">Успешная загрузка</h2>\n<pre><code class=\"language-javascript\">alco(&#39;onReady&#39;, function(){\n  console.log(&#39;alco ready callback! uid:&#39;, alco(&#39;getUid&#39;));\n});\n\n//&gt; alco ready callback! uid: 4752253616879771366</code></pre>\n<p>Если трекер уже загружен, коллбек будет выполнен сразу</p>\n<h2 id=\"-alco-user-id\">Получение Alco User ID</h2>\n<pre><code class=\"language-javascript\">alco(&#39;getUid&#39;)</code></pre>\n<p>Но получить его можно только после загрузки трекера, поэтому следует оборачивать в обработчик загрузки</p>\n<pre><code class=\"language-javascript\">alco(&#39;onReady&#39;, function(){\n  console.log(&#39;alcoUID:&#39;,alco(&#39;getUid&#39;));\n});\n\n// Или так\n\nalco(&#39;onReady&#39;, function(){\n  dataLayer.push({\n    &#39;alcoUserId&#39;: alco(&#39;getUid&#39;)\n  });\n});</code></pre>\n<pre><code class=\"language-javascript\"></code></pre>\n<h2 id=\"-\">Подписка на все события</h2>\n<p>Еще до того, как данные будут отправлены на сервер, они станут доступны на странице</p>\n<pre><code class=\"language-javascript\">alco(&#39;onEvent&#39;, function(name, data){\n  //... your code here\n  console.log(name, data);\n});</code></pre>\n<pre><code class=\"language-javascript\">alco(&#39;onEvent&#39;, function(name, data){\n  // Ловим событие ошибки при заполнении адреса доставки\n  if (name === &#39;Form invalid&#39; &amp;&amp; data.fname === &#39;delivery&#39;) {\n    // Ждем 5 секунд\n    setTimeout(function(){\n      // Открываем окно чата, передаем пометку оператору\n      SomeChat.openChat({info: &#39;Проблемы с заполнением формы доставки&#39;});\n      // Передаем событие открытия чата в Rockstat, чтобы можно было оценить эффективность\n      aclo(&#39;event&#39;, &#39;Chat Opened&#39;, {reason: &#39;Invalid delivery details&#39;})\n    }), 5*1000);\n  }\n});</code></pre>\n"}