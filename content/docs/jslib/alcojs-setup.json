{
  "bodyContent": "# Установка счетчика на сайт\n\n## Подготовка сниппета\n\n```html\n<script type=\"text/javascript\">\n  !function (w, d, st, rst, se, he) {\n    if(w.rstat) return; rst = w.rstat = function () {\n      var args = Array.prototype.slice.call(arguments);\n      return rst.doCall ? rst.doCall.call(rst, args) : rst._q.push(args); };\n    rst.push = rst; rst._l = !0; rst._sv = 3.0; rst._q = [];\n    rst._jsl = function (src) {\n      se = d.createElement(st); se.async = !0; se.src = src;\n      he = d.getElementsByTagName(st)[0]; he.parentNode.insertBefore(se, he); };\n    rst.attach = function(host){ rst._host = host; rst._jsl('https://'+rst._host+'/lib.js'); }\n  }(window, document, 'script');\n  // Configuration\n  rstat('configure', {\n    projectId: 1 // <<< придумайте номер сайта, если их несколько\n  });\n  rstat('page'); // <<< отправка просмотра страницы, убирается на SPA\n  rstat.attach('tracker.rockstat.test') // <<< Подставьте домен, на котором расположен трекер\n  //rstat('onReady', function(){\n  //  console.log('rstat` ready callback! uid:', rstat('getUid'));\n  //});\n  //rstat('onEvent', function(name, data){\n  //  console.log('rstat event callback:', name, data);\n  //});\n  //rstat('onServerMessage', 'sm', function(name, data){\n  //  console.log('onServerMessage', name, data);\n  //});\n</script>\n```\n\nВ коде вместо `TRACKER_DOMAIN` нужно подставить, домен на котором расположен трекер.  \nЛучше всего установить код между `<head>` и `</head>` или сразу после `<body>`. Можно поставить через Google Tag Manager, тут есть свои плюсы, минусы и особенности, надо проверять.\n\n**Доступные параметры**\n\n| Property          |Type       |Default    |Description\n|---------------------|---------|---------|--------------------------------------------------------------------------------------------------------------------------|\n| projectId           | Number  | 1       | Произвольный ID сайта/проекта/чего-то еще                                                                                |\n| sessionTimeout      | Number  | 1800    | Тайм-аут сессии: сколько времени с   последнего события должно пройти                                                    |\n| lastCampaignExpires | Number  | 7776000 | Период, на который запоминаются   последние рекламные метки. Указывается в секундах.                                      |\n| cookieDomain        | String  | auto    | Домен                                                                                                                    |\n| trackActivity       | Boolean | true    | Флаг автоматического отслеживания   активности посетителей на сайте. Отслеживается движение мышью                        |\n| trackClicks         | Boolean | true    | Автоматическое отслеживание   кликов. Обрабатывает все клики и автоматически классифицирует их на   внутренние и внешние |\n| trackForms          | Boolean | true    | Автоматическое отслеживание   взаимодействий с формами. Генерирует события фокуса                                        |\n| allowHTTP           | Boolean | false   | По дефолту работает только на   https. Этим параметром можете разрешить работу на http                                   |\n\n\n## Через GTM\n\n\n\n### Создание тега Rockstat\n\nСоздайте новый Пользовательский HTML тег, вставьте ваш код счетчика Rockstat.\nВ расширенных настройках поставьте \"Приоритет активации тегов\" равным 100.\n\n![](/static/media/alcojs_setup/gtm_tag_creation.png)\n\nВ триггерах выберите All Pages / Все страницы\nЖмем сохранить, указываем имя, например Rockstat\n\n### События, отправляемые с сайта через dataLayer\n\nВыбираем тип тега \"Пользовательский HTML\"\n```javascript\n<script type=\"text/javascript\">\n  var name = ({{category}} || '') + '::' + ({{action}} || '');\n  var data = {};\n  if({{label}}) data.label = {{label}};\n  if({{value}}) data.value = {{value}};\n  alco('event', name, data)\n</script>\n```\n\nвместо category, action, label, value подставьте переменные, используемые у вас для передачи этих данных в GA.\n\nВыбираем триггер, используемый для отправки пользовательских событий в Google (Universal) Analytics.\n\nЖмем сохранить, указываем имя, например Custom Events to Rockstat\n\n### События GA, размеченные через GTM\n\nВам необходимо найти все теги, созданные для отслеживания действий и передачи их в Google (Universal) Analytics, и для каждого их них в расширенных настройках включить активацию тега после. При выборе тега можно сразу создать пользовательский HTML тег, вызывающий событие Rockstat.\n\n![](/static/media/alcojs_setup/activate_gtm_tag.png)\n\n![](/static/media/alcojs_setup/choose_gtmtag.png)\n\nСодержимое тега\n\n```javascript\n<script type=\"text/javascript\">\n  alco('event', 'CATEGORY::ACTION', {\n    label: 'LABEL',\n    value: 'VALUE'\n  })\n</script>\n```\n\nВместо CATEGORY, ACTION, LABEL, VALUE подставьте соответствующие значения. Если Label или Value события отсутствуют, просто удалите соответствующую строку.",
  "bodyHtml": "<h1>Установка счетчика на сайт</h1>\n<h2>Подготовка сниппета</h2>\n<pre><code class=\"hljs\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">\"text/javascript\"</span>&gt;</span><span class=\"javascript\">\n  !<span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">w, d, st, rst, se, he</span>) </span>{\n    <span class=\"hljs-keyword\">if</span>(w.rstat) <span class=\"hljs-keyword\">return</span>; rst = w.rstat = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) </span>{\n      <span class=\"hljs-keyword\">var</span> args = <span class=\"hljs-built_in\">Array</span>.prototype.slice.call(<span class=\"hljs-built_in\">arguments</span>);\n      <span class=\"hljs-keyword\">return</span> rst.doCall ? rst.doCall.call(rst, args) : rst._q.push(args); };\n    rst.push = rst; rst._l = !<span class=\"hljs-number\">0</span>; rst._sv = <span class=\"hljs-number\">3.0</span>; rst._q = [];\n    rst._jsl = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">src</span>) </span>{\n      se = d.createElement(st); se.async = !<span class=\"hljs-number\">0</span>; se.src = src;\n      he = d.getElementsByTagName(st)[<span class=\"hljs-number\">0</span>]; he.parentNode.insertBefore(se, he); };\n    rst.attach = <span class=\"hljs-function\"><span class=\"hljs-keyword\">function</span>(<span class=\"hljs-params\">host</span>)</span>{ rst._host = host; rst._jsl(<span class=\"hljs-string\">'https://'</span>+rst._host+<span class=\"hljs-string\">'/lib.js'</span>); }\n  }(<span class=\"hljs-built_in\">window</span>, <span class=\"hljs-built_in\">document</span>, <span class=\"hljs-string\">'script'</span>);\n  <span class=\"hljs-comment\">// Configuration</span>\n  rstat(<span class=\"hljs-string\">'configure'</span>, {\n    <span class=\"hljs-attr\">projectId</span>: <span class=\"hljs-number\">1</span> <span class=\"hljs-comment\">// &lt;&lt;&lt; придумайте номер сайта, если их несколько</span>\n  });\n  rstat(<span class=\"hljs-string\">'page'</span>); <span class=\"hljs-comment\">// &lt;&lt;&lt; отправка просмотра страницы, убирается на SPA</span>\n  rstat.attach(<span class=\"hljs-string\">'tracker.rockstat.test'</span>) <span class=\"hljs-comment\">// &lt;&lt;&lt; Подставьте домен, на котором расположен трекер</span>\n  <span class=\"hljs-comment\">//rstat('onReady', function(){</span>\n  <span class=\"hljs-comment\">//  console.log('rstat` ready callback! uid:', rstat('getUid'));</span>\n  <span class=\"hljs-comment\">//});</span>\n  <span class=\"hljs-comment\">//rstat('onEvent', function(name, data){</span>\n  <span class=\"hljs-comment\">//  console.log('rstat event callback:', name, data);</span>\n  <span class=\"hljs-comment\">//});</span>\n  <span class=\"hljs-comment\">//rstat('onServerMessage', 'sm', function(name, data){</span>\n  <span class=\"hljs-comment\">//  console.log('onServerMessage', name, data);</span>\n  <span class=\"hljs-comment\">//});</span>\n</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span></code></pre><p>В коде вместо <code>TRACKER_DOMAIN</code> нужно подставить, домен на котором расположен трекер.<br>\nЛучше всего установить код между <code>&lt;head&gt;</code> и <code>&lt;/head&gt;</code> или сразу после <code>&lt;body&gt;</code>. Можно поставить через Google Tag Manager, тут есть свои плюсы, минусы и особенности, надо проверять.</p>\n<p><strong>Доступные параметры</strong></p>\n<table>\n<thead>\n<tr>\n<th>Property</th>\n<th>Type</th>\n<th>Default</th>\n<th>Description</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>projectId</td>\n<td>Number</td>\n<td>1</td>\n<td>Произвольный ID сайта/проекта/чего-то еще</td>\n</tr>\n<tr>\n<td>sessionTimeout</td>\n<td>Number</td>\n<td>1800</td>\n<td>Тайм-аут сессии: сколько времени с   последнего события должно пройти</td>\n</tr>\n<tr>\n<td>lastCampaignExpires</td>\n<td>Number</td>\n<td>7776000</td>\n<td>Период, на который запоминаются   последние рекламные метки. Указывается в секундах.</td>\n</tr>\n<tr>\n<td>cookieDomain</td>\n<td>String</td>\n<td>auto</td>\n<td>Домен</td>\n</tr>\n<tr>\n<td>trackActivity</td>\n<td>Boolean</td>\n<td>true</td>\n<td>Флаг автоматического отслеживания   активности посетителей на сайте. Отслеживается движение мышью</td>\n</tr>\n<tr>\n<td>trackClicks</td>\n<td>Boolean</td>\n<td>true</td>\n<td>Автоматическое отслеживание   кликов. Обрабатывает все клики и автоматически классифицирует их на   внутренние и внешние</td>\n</tr>\n<tr>\n<td>trackForms</td>\n<td>Boolean</td>\n<td>true</td>\n<td>Автоматическое отслеживание   взаимодействий с формами. Генерирует события фокуса</td>\n</tr>\n<tr>\n<td>allowHTTP</td>\n<td>Boolean</td>\n<td>false</td>\n<td>По дефолту работает только на   https. Этим параметром можете разрешить работу на http</td>\n</tr>\n</tbody>\n</table>\n<h2>Через GTM</h2>\n<h3>Создание тега Rockstat</h3>\n<p>Создайте новый Пользовательский HTML тег, вставьте ваш код счетчика Rockstat.\nВ расширенных настройках поставьте &quot;Приоритет активации тегов&quot; равным 100.</p>\n<p><img src=\"/static/media/alcojs_setup/gtm_tag_creation.png\" alt=\"\"></p>\n<p>В триггерах выберите All Pages / Все страницы\nЖмем сохранить, указываем имя, например Rockstat</p>\n<h3>События, отправляемые с сайта через dataLayer</h3>\n<p>Выбираем тип тега &quot;Пользовательский HTML&quot;</p>\n<pre><code class=\"hljs\">&lt;script type=<span class=\"hljs-string\">\"text/javascript\"</span>&gt;\n  <span class=\"hljs-keyword\">var</span> name = ({{category}} || <span class=\"hljs-string\">''</span>) + <span class=\"hljs-string\">'::'</span> + ({{action}} || <span class=\"hljs-string\">''</span>);\n  <span class=\"hljs-keyword\">var</span> data = {};\n  <span class=\"hljs-keyword\">if</span>({{label}}) data.label = {{label}};\n  <span class=\"hljs-keyword\">if</span>({{value}}) data.value = {{value}};\n  alco(<span class=\"hljs-string\">'event'</span>, name, data)\n&lt;<span class=\"hljs-regexp\">/script&gt;</span></code></pre><p>вместо category, action, label, value подставьте переменные, используемые у вас для передачи этих данных в GA.</p>\n<p>Выбираем триггер, используемый для отправки пользовательских событий в Google (Universal) Analytics.</p>\n<p>Жмем сохранить, указываем имя, например Custom Events to Rockstat</p>\n<h3>События GA, размеченные через GTM</h3>\n<p>Вам необходимо найти все теги, созданные для отслеживания действий и передачи их в Google (Universal) Analytics, и для каждого их них в расширенных настройках включить активацию тега после. При выборе тега можно сразу создать пользовательский HTML тег, вызывающий событие Rockstat.</p>\n<p><img src=\"/static/media/alcojs_setup/activate_gtm_tag.png\" alt=\"\"></p>\n<p><img src=\"/static/media/alcojs_setup/choose_gtmtag.png\" alt=\"\"></p>\n<p>Содержимое тега</p>\n<pre><code class=\"hljs\">&lt;script type=<span class=\"hljs-string\">\"text/javascript\"</span>&gt;\n  alco(<span class=\"hljs-string\">'event'</span>, <span class=\"hljs-string\">'CATEGORY::ACTION'</span>, {\n    <span class=\"hljs-attr\">label</span>: <span class=\"hljs-string\">'LABEL'</span>,\n    <span class=\"hljs-attr\">value</span>: <span class=\"hljs-string\">'VALUE'</span>\n  })\n&lt;<span class=\"hljs-regexp\">/script&gt;</span></code></pre><p>Вместо CATEGORY, ACTION, LABEL, VALUE подставьте соответствующие значения. Если Label или Value события отсутствуют, просто удалите соответствующую строку.</p>\n",
  "preview": "Установка счетчика на сайт\n\n Подготовка сниппета\n\nscript type=\"text/javascript\"\n  !function (w, d, st, rst,",
  "title": "Установка счетчика на сайт",
  "dir": "content/docs/jslib",
  "base": "alcojs-setup.json",
  "ext": ".json",
  "sourceBase": "alcojs-setup.md",
  "sourceExt": ".md"
}