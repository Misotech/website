{"data":"<h1 id=\"-\">Автоматичексие события</h1>\n<h2 id=\"-\">Старт сессии</h2>\n<p>Сессионные данные общие на все события, у сессии есть только название. Даже data нет</p><pre><code class=\"language-json\">{\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"session\"</span>\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"session\"</span>: {\n    <span class=\"hljs-comment\">// подробнее в разделе общей структуры данных и разделе про сессии</span>\n  }\n  <span class=\"hljs-comment\">//...</span>\n}</code></pre>\n<h2 id=\"-\">Загрузка страницы</h2>\n<p>Просмотры страниц могут дополняться информацией о странице, вроде типа страницы или категории.</p><pre><code class=\"language-json\">{\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"pageview\"</span>,\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"data\"</span>: {\n    <span class=\"hljs-string\">\"category\"</span>: <span class=\"hljs-string\">\"content page\"</span>,\n    <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"delivery\"</span>\n  }\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"perf\"</span>: {\n    <span class=\"hljs-comment\">// подробнее в разделе с общей структурой данных</span>\n  }\n  <span class=\"hljs-comment\">//...</span>\n}</code></pre>\n<h2 id=\"-\">Страница загружена</h2>\n<p>Содержит данные производительности сети и браузера, которые находятся в <code>perf</code> <a href=\"alcojs-data-format\">общей структуры данных</a></p><pre><code class=\"language-json\">{\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"Page loaded\"</span>,\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"perf\"</span>: {\n    <span class=\"hljs-comment\">// подробнее в разделе с общей структурой данных</span>\n  }\n  <span class=\"hljs-comment\">//...</span>\n}</code></pre>\n<h2 id=\"-\">Выгрузка страницы</h2>\n<p>Вызывается при переходе на другую страницу или закрытии браузера/вкладки</p><pre><code class=\"language-json\">{\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"Page unload\"</span>,\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"perf\"</span>: {\n    <span class=\"hljs-comment\">// подробнее в разделе с общей структурой данных</span>\n  }\n  <span class=\"hljs-comment\">//...</span>\n}</code></pre>\n<h2 id=\"-\">Клики по ссылкам</h2>\n<pre><code class=\"language-json\">{\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"Link click\"</span>,\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"data\"</span>: {\n    <span class=\"hljs-string\">\"href\"</span>: <span class=\"hljs-string\">\"https://oooooo....\"</span>,\n    <span class=\"hljs-string\">\"text\"</span>: <span class=\"hljs-string\">\"Текст ссылки\"</span>,\n    <span class=\"hljs-comment\">// Ссылка уводит посетителя на другой сайт</span>\n    <span class=\"hljs-string\">\"outbound\"</span>: <span class=\"hljs-literal\">true</span> | <span class=\"hljs-literal\">false</span>\n  }\n  <span class=\"hljs-comment\">//...</span>\n}</code></pre>\n<h2 id=\"-\">Взаимодействие с полями формы</h2>\n<p>Три события с одинаковым набором параметров: <code>Field focus</code> каретка поставлена в поле ввода <code>Field change</code> в поле поменялись данные <code>Field blur</code> каретка покинула поле ввода</p><pre><code class=\"language-json\">{\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"Field change\"</span>,\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"data\"</span>: {\n    <span class=\"hljs-comment\">// Название события DOM.</span>\n    <span class=\"hljs-string\">\"event\"</span>: <span class=\"hljs-string\">\"change\"</span>,\n    <span class=\"hljs-comment\">// element tag: html тэг элемента формы</span>\n    <span class=\"hljs-string\">\"etag\"</span>: <span class=\"hljs-string\">\"input\"</span>,\n    <span class=\"hljs-comment\">// element type: атрибут type элемента формы</span>\n    <span class=\"hljs-string\">\"etype\"</span>: <span class=\"hljs-string\">\"text\"</span>,\n    <span class=\"hljs-comment\">// element name: атрибут name элемента формы</span>\n    <span class=\"hljs-string\">\"ename\"</span>: <span class=\"hljs-string\">\"delivery_address\"</span>, <span class=\"hljs-comment\">// Название поля формы</span>\n    <span class=\"hljs-comment\">// element placeholder: атрибут placeholder (значение пока ничего не вписано)</span>\n    <span class=\"hljs-string\">\"eph\"</span>: <span class=\"hljs-literal\">null</span>,\n    <span class=\"hljs-comment\">// element class: атрибут class элемента формы (css)</span>\n    <span class=\"hljs-string\">\"ecl\"</span>: <span class=\"hljs-string\">\"select2-selection form-field\"</span>,\n    <span class=\"hljs-comment\">// element id: атрибут id элемента формы</span>\n    <span class=\"hljs-string\">\"eid\"</span>: <span class=\"hljs-string\">\"\"</span>,\n    <span class=\"hljs-comment\">// form method: http метрод отправки формы</span>\n    <span class=\"hljs-string\">\"fmthd\"</span>: <span class=\"hljs-string\">\"post\"</span>,\n    <span class=\"hljs-comment\">// form action: url, куда будет отправлена форма</span>\n    <span class=\"hljs-string\">\"fact\"</span>: <span class=\"hljs-string\">\"/checkout/purchase\"</span>,\n    <span class=\"hljs-comment\">// form name: атрибут name элемента формы</span>\n    <span class=\"hljs-string\">\"fname\"</span>: <span class=\"hljs-string\">\"order-form\"</span>,\n    <span class=\"hljs-comment\">// form class: атрибут class элемента формы (css)</span>\n    <span class=\"hljs-string\">\"fcls\"</span>: <span class=\"hljs-string\">\"\"</span>,\n    <span class=\"hljs-comment\">// element id: атрибут id элемента формы</span>\n    <span class=\"hljs-string\">\"fid\"</span>: <span class=\"hljs-string\">\"order-form\"</span>,\n  }\n  <span class=\"hljs-comment\">//...</span>\n}</code></pre>\n<p>In case of form tag is absent</p><pre><code class=\"language-json\">{\n  <span class=\"hljs-regexp\">//</span>...\n  <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"field_change\"</span>,\n  <span class=\"hljs-regexp\">//</span>...\n  <span class=\"hljs-string\">\"data\"</span>: {\n    <span class=\"hljs-regexp\">//</span> Название события DOM.\n    <span class=\"hljs-string\">\"event\"</span>: <span class=\"hljs-string\">\"change\"</span>,\n    <span class=\"hljs-regexp\">//</span> element tag: html тэг элемента формы\n    <span class=\"hljs-string\">\"etag\"</span>: <span class=\"hljs-string\">\"input\"</span>,\n    <span class=\"hljs-regexp\">//</span> element type: атрибут type элемента формы\n    <span class=\"hljs-string\">\"etype\"</span>: <span class=\"hljs-string\">\"text\"</span>,\n    <span class=\"hljs-regexp\">//</span> element name: атрибут name элемента формы\n    <span class=\"hljs-string\">\"ename\"</span>: <span class=\"hljs-string\">\"delivery_address\"</span>, <span class=\"hljs-regexp\">//</span> Название поля формы\n    <span class=\"hljs-regexp\">//</span> element placeholder: атрибут placeholder (значение пока ничего не вписано)\n    <span class=\"hljs-string\">\"eph\"</span>: <span class=\"hljs-string\">\"\"</span>,\n    <span class=\"hljs-regexp\">//</span> element class: атрибут class элемента формы (css)\n    <span class=\"hljs-string\">\"ecl\"</span>: <span class=\"hljs-string\">\"select2-selection form-field\"</span>,\n    <span class=\"hljs-regexp\">//</span> element id: атрибут id элемента формы\n    <span class=\"hljs-string\">\"eid\"</span>: <span class=\"hljs-string\">\"\"</span>,\n    <span class=\"hljs-regexp\">//</span> <span class=\"hljs-keyword\">if</span> form not present\n    <span class=\"hljs-string\">\"ferr\"</span>: <span class=\"hljs-string\">\"Form element absent\"</span>\n  }\n  <span class=\"hljs-regexp\">//</span>...\n}</code></pre>\n<p>Это одни из самых важных автоматических событий, по ним можно понимать, где произошел затык</p><h2 id=\"-\">Отправка формы</h2>\n<pre><code class=\"language-json\">{\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"Form submit\"</span>,\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"data\"</span>: {\n    <span class=\"hljs-comment\">// DOM событие отправки формы</span>\n    <span class=\"hljs-string\">\"event\"</span>: <span class=\"hljs-string\">\"submit\"</span>,\n    <span class=\"hljs-comment\">// адрес назначения формы</span>\n    <span class=\"hljs-string\">\"fact\"</span>: <span class=\"hljs-string\">\"/cart\"</span>,\n    <span class=\"hljs-comment\">// form class: атрибут class элемента формы (css)</span>\n    <span class=\"hljs-string\">\"fcls\"</span>: <span class=\"hljs-string\">\"cart-submit\"</span>,\n    <span class=\"hljs-comment\">// element id: атрибут id элемента формы</span>\n    <span class=\"hljs-string\">\"fid\"</span>: <span class=\"hljs-string\">\"cart-submit\"</span>,\n    <span class=\"hljs-comment\">// form method: http метрод отправки формы</span>\n    <span class=\"hljs-string\">\"fmthd\"</span>: <span class=\"hljs-string\">\"post\"</span>,\n    <span class=\"hljs-comment\">// form name: атрибут name элемента формы</span>\n    <span class=\"hljs-string\">\"fname\"</span>: <span class=\"hljs-string\">\"cart\"</span>\n  }\n  <span class=\"hljs-comment\">//...</span>\n}</code></pre>\n<p>Еще один важный этап воронки</p><h2 id=\"-\">Скролл / прокрутка</h2>\n<p>Событие прокрутки на определенную позицию страницы. Сами данные скрола находятся в <code>scroll</code> <a href=\"alcojs-data-format\">общей структуры данных</a> и прикладываются ко всем событиям связанными с действиями пользователя.</p><pre><code class=\"language-json\">{\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"Scroll\"</span>\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"scroll\"</span>: {\n    <span class=\"hljs-comment\">// подробнее в разделе общей структуры данных</span>\n  }\n  <span class=\"hljs-comment\">//...</span>\n}</code></pre>\n<h2 id=\"-\">Активность: движение мышью и др...</h2>\n<p>Внутри Rockstat имеется счетчик браузерных событий, который отправляется на сервер через одинаковый интервал времени (по дефолту 5 секунд) и обнуляется. Если активности нет, то событие не отправляется, но добавляется единица к <code>iteration</code>.</p><pre><code class=\"language-json\">{\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"name\"</span>: <span class=\"hljs-string\">\"Activity\"</span>,\n  <span class=\"hljs-comment\">//...</span>\n  <span class=\"hljs-string\">\"data\"</span>: {\n    <span class=\"hljs-comment\">// Номер итерации обработки активности</span>\n    <span class=\"hljs-string\">\"iteration\"</span>: <span class=\"hljs-number\">65</span>,\n    <span class=\"hljs-comment\">// Номер итерации содержащей действия (другие 61 были без активности пользователя и не отправлялись)</span>\n    <span class=\"hljs-string\">\"active\"</span>: <span class=\"hljs-number\">4</span>,\n    <span class=\"hljs-comment\">// Интервал отправки данных об активности, секунд</span>\n    <span class=\"hljs-string\">\"interval\"</span>: <span class=\"hljs-number\">5</span>,\n    <span class=\"hljs-comment\">// Событий движения мыши</span>\n    <span class=\"hljs-string\">\"mousemove\"</span>: <span class=\"hljs-number\">62</span>,\n    <span class=\"hljs-comment\">// Событий нажатия кнопки мыши</span>\n    <span class=\"hljs-string\">\"mousedown\"</span>: <span class=\"hljs-number\">2</span>,\n    <span class=\"hljs-comment\">// Событий отпускания кнопки мыши</span>\n    <span class=\"hljs-string\">\"mouseup\"</span>: <span class=\"hljs-number\">2</span>,\n    <span class=\"hljs-comment\">// Событий кликов</span>\n    <span class=\"hljs-string\">\"click\"</span>: <span class=\"hljs-number\">2</span>,\n    <span class=\"hljs-comment\">// Событий прокрутки (именно на уровне мыши/трекпада)</span>\n    <span class=\"hljs-string\">\"wheel\"</span>: <span class=\"hljs-number\">23</span>,\n    <span class=\"hljs-comment\">// Событий скролла станицы</span>\n    <span class=\"hljs-string\">\"scroll\"</span>: <span class=\"hljs-number\">22</span>\n    <span class=\"hljs-comment\">// и другие</span>\n  }\n  <span class=\"hljs-comment\">//...</span>\n}</code></pre>\n<p>Полный список отслеживаемых событий браузера:</p><p><code>touchmove</code>, <code>touchstart</code>, <code>touchleave</code>, <code>touchenter</code>, <code>touchend</code>, <code>touchcancel</code>, <code>click</code>, <code>mouseup</code>, <code>mousedown</code>, <code>mousemove</code>, <code>mousewheel</code>, <code>mousewheel</code>, <code>wheel</code>, <code>scroll</code>, <code>keypress</code>, <code>keydown</code>, <code>keyup</code>, <code>resize</code>, <code>focus</code>, <code>blur</code></p><p>Описание: <a href=\"https://developer.mozilla.org/en-US/docs/Web/Events\">https://developer.mozilla.org/en-US/docs/Web/Events</a>\nЕсли в списке отсутствует какое-то важное событие, напишите в сообществе и оно будет добавлено.</p><pre><code class=\"language-json\"></code></pre>\n"}