# Микросервисная архитектура с Band




## Протокол взаимодействия

### JSON-RPC2 over Redis PubSub

Структура сообщения

Обрабатывается библиотеками, в функции передается только результат


### Ответы к Frontier service

```typescript

interface DispatchResult {
  location?: string;
  error?: string;
  errorCode?: number;
  [k: string]: any;
}

```

Обработка результата:

1. Если имеется error, будет возвращена ошибка с http кодом из `errorCode` или подставлен кол по умолочанию `500`
1. Если имеется `location` будет совершен редирект в эту локацию. Всегда используется `302` код
1. Во всех остальных случаях ответ будет возвращен полностью
