{
  "bodyContent": "# Обогащение на сервере\n\nПри получении данных на вход, серверная часть трекера производит обогащение данных на осноые доступных источников. В данный момент их 3, но архитектура подоготовлена для того, чтобы их было много и в скором времени список будет пополнен.\n\n\n## Core\n\nЭто не совсем обогатитель, но дописывает параметры уровня HTTP при получении данных\n\n```json\n  \"ip\": \"172.17.121.1\", // ip\n  \"userAgent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_2) ...Chrome/63.0.3239.132 Safari/537.36\",\n  \"time\": \"'Fri Mar 16 2018 01:04:33 GMT (GMT)'\"\n```\n\n\n\n## Matomo Device Detector\n\nОбогатитель на базе библиотекти разбора User-Agent из Matomo (Piwik)\n\n```json\n  \n  // Результаты разбора user-agent\n  \"mdd\": {\n    \"isBot\": 0, // Признак бота, если он представился, как делают поисковые и аналитические боты\n    \"os\": {\n      \"name\": \"Mac\",\n      \"platform\": \"\",\n      \"version\": \"10.13\",\n    },\n    // Если визит с мобильного телефона, будет показывать производителя и модель аппарата\n    \"device\": { \n      \"brand\": \"\",\n      \"model\": \"\",\n      \"type\": \"desktop\",\n    },\n    // Может быть мобильное приложение, телевизор или игровая консоль\n    \"client\": {\n      \"type\": \"browser\",\n      \"name\": \"Chrome\",\n      \"version\": \"63.0\",\n    }\n  }\n\n```\n\n\n## Sypex Geo IP\n\nОбогатитель определяющий регион по IP на базе библиотеки Sypex Geo\n\n```json\n\n  // Результаты гео-кодинга по ip\n  \"sxg\": {\n    \"city\": {\n      \"id\": 524901,\n      \"name_en\": \"Moscow\",\n      \"name_ru\": \"Москва\"\n    },\n    \"region\": {\n      \"iso\": \"RU-MOW\",\n      \"name_en\": \"Moskva\",\n      \"name_ru\": \"Москва\"\n    },\n    \"country\": {\n      \"iso\": \"RU\",\n      \"name_en\": \"Russia\",\n      \"name_ru\": \"Россия\"\n    }\n  }\n\n```\n\n## Page url parser\n\nЭто очень простой обогатитель, разбирающий на кусочки адрес страницы на которой произошло событие\n\n```json\n\n  \"page\": {\n    \"domain\": \"somedomain.ru\",\n    \"proto\": \"https\"\n    \"query\": {\n      \"aaa\": \"bbb\",\n      \"utm_source\": \"youporn\"\n    }\n  }\n\n```",
  "bodyHtml": "<h1>Обогащение на сервере</h1>\n<p>При получении данных на вход, серверная часть трекера производит обогащение данных на осноые доступных источников. В данный момент их 3, но архитектура подоготовлена для того, чтобы их было много и в скором времени список будет пополнен.</p>\n<h2>Core</h2>\n<p>Это не совсем обогатитель, но дописывает параметры уровня HTTP при получении данных</p>\n<pre><code class=\"hljs\">\"ip\": \"172.17.121.1\", // ip\n  \"userAgent\": \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_13_2) ...Chrome/63.0.3239.132 Safari/537.36\",\n  \"time\": \"'Fri Mar 16 2018 01:04:33 GMT (GMT)'\"</code></pre><h2>Matomo Device Detector</h2>\n<p>Обогатитель на базе библиотекти разбора User-Agent из Matomo (Piwik)</p>\n<pre><code class=\"hljs\">// Результаты разбора user-agent\n  \"mdd\": {\n    \"isBot\": 0, // Признак бота, если он представился, как делают поисковые и аналитические боты\n    \"os\": {\n      \"name\": \"Mac\",\n      \"platform\": \"\",\n      \"version\": \"10.13\",\n    },\n    // Если визит с мобильного телефона, будет показывать производителя и модель аппарата\n    \"device\": { \n      \"brand\": \"\",\n      \"model\": \"\",\n      \"type\": \"desktop\",\n    },\n    // Может быть мобильное приложение, телевизор или игровая консоль\n    \"client\": {\n      \"type\": \"browser\",\n      \"name\": \"Chrome\",\n      \"version\": \"63.0\",\n    }\n  }</code></pre><h2>Sypex Geo IP</h2>\n<p>Обогатитель определяющий регион по IP на базе библиотеки Sypex Geo</p>\n<pre><code class=\"hljs\">// Результаты гео-кодинга по ip\n  \"sxg\": {\n    \"city\": {\n      \"id\": 524901,\n      \"name_en\": \"Moscow\",\n      \"name_ru\": \"Москва\"\n    },\n    \"region\": {\n      \"iso\": \"RU-MOW\",\n      \"name_en\": \"Moskva\",\n      \"name_ru\": \"Москва\"\n    },\n    \"country\": {\n      \"iso\": \"RU\",\n      \"name_en\": \"Russia\",\n      \"name_ru\": \"Россия\"\n    }\n  }</code></pre><h2>Page url parser</h2>\n<p>Это очень простой обогатитель, разбирающий на кусочки адрес страницы на которой произошло событие</p>\n<pre><code class=\"hljs\">\"page\": {\n    \"domain\": \"somedomain.ru\",\n    \"proto\": \"https\"\n    \"query\": {\n      \"aaa\": \"bbb\",\n      \"utm_source\": \"youporn\"\n    }\n  }</code></pre>",
  "preview": "Обогащение на сервере\n\nПри получении данных на вход, серверная часть трекера производит обогащение данных на",
  "title": "Обогащение на сервере",
  "dir": "content/front",
  "base": "tracker-enrichment.json",
  "ext": ".json",
  "sourceBase": "tracker-enrichment.md",
  "sourceExt": ".md"
}